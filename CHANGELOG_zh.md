# 更新日志

[English](https://github.com/Liafonx/Balatro-SaveRewinder/blob/main/CHANGELOG.md) | 简体中文

此文件记录 Save Rewinder 的所有重要更改。

## [1.4.6.1] - 2026-01-17

### 更改
- **发布包结构** — 更改了 zip 文件结构：模组文件现在包装在 `SaveRewinder` 文件夹中，而不是位于根目录

> ℹ️ **注意**：此版本**不包含新功能或错误修复**。仅更改了发布 zip 结构以便于安装。如果你在安装或更新到 1.4.6 版本时遇到任何问题，请使用此版本。否则，如果你已经成功运行 1.4.6，**无需更新**。

> 📦 **Thunderstore 用户**：Thunderstore 包结构保持不变。

## [1.4.6] - 2026-01-17

### 新增
- **智能继续匹配** — 继续游戏时，模组会自动高亮显示你在存档列表中的确切位置（即使不是最新的存档）
- **自定义存档标识符** — 存档现在包含唯一的 `_rewinder_id` 字段用于精确匹配

### 修复
- **首次在商店中打开补充包存档被阻止** — 恢复到"进入商店"后，打开补充包存档现在可以正常保存
- **补充包后的商店存档标签错误** — 关闭补充包后的商店存档现在标记为"在商店中"而非"重掷商店"
- **选择盲注序号重置** — 连续的选择盲注存档现在正确递增（B1、B2、B3）
- **恢复后出现重复存档** — 修复恢复后重复检测状态未重置的问题
- **页码显示不更新** — 点击"当前存档"按钮时，页码现在正确更新
- **窗口高度不一致** — 存档列表窗口现在无论显示多少个存档都保持统一高度

### 改进
- 更快的存档列表加载和高亮显示
- 更好地检测重复存档

> ⚠️ **注意**：此版本会在你的存档数据中添加 `_rewinder_id` 字段。这不会影响正常游戏，但意味着**安装此模组后你的 save.jkr 文件会略有不同**。

## [1.4.5] - 2026-01-09

### ⚠️ 破坏性更改

**旧存档与此版本不兼容。更新前请删除存档文件夹。**

此版本包含重大性能优化，不再兼容旧版本存档。

### 新增
- **"重掷商店"标签** — 商店存档现在标记为"重掷商店"而非"在商店中"
- **未发现盲注图标** — 选择盲注存档显示"?"图标而非上一个盲注图标
- **上一个Boss盲注图标** — 击败Boss后，商店存档显示刚击败的Boss盲注
- **商店指示符** — 每个底注的第一个商店显示"$"指示符

### 修复
- **选择盲注序号** — 第一个"选择盲注"存档现在正确显示序号1

### 优化
- **减少内存使用** — 优化内部数据结构以提高效率
- **更快的存档列表加载** — 存档元数据现在在创建时预计算
- **更小的存档文件** — 元数据文件大小减少 30%
- **即时 UI 更新** — 打开列表时不再需要扫描存档

### 更改
- **简化发布压缩包** — 现在直接解压到 `Mods/SaveRewinder/`，无需嵌套文件夹

### 改进
- 更简洁的存档列表显示（移除部分状态的"+>"前缀）

## [1.4.0] - 2025-12-29


### 新增
- **存档列表中的盲注图标** — 显示盲注图像（小盲/大盲/Boss盲）而非回合数（默认启用）
- **盲注图标悬停效果** — 悬停时的动画和声音（默认启用）
- 重新组织配置界面，采用两列布局和分节标题
- README 中添加了截图

### 更改
- 配置项"调试：显示存档通知"重命名为"调试：详细日志"
- 存档列表中的"返回"按钮现在直接返回游戏而非选项菜单
- 改进盲注精灵图的阴影渲染
- 延迟缓存初始化，在 Steamodded 准备就绪后运行

### 修复
- 修复当前存档条目上的箭头指示器定位
- 减少正常操作期间的详细日志输出

## [1.3.1] - 2025-12-28

### 新增
- 暂停菜单中的橙色"存档"按钮，提高可见性
- 游戏内模组图标（在 Steamodded 模组列表中可见）

### 更改
- 更新安装说明以提及橙色存档按钮

## [1.3.0] - 2025-12-25

### 新增
- 中文语言支持（简体中文）
- 本地化 UI 分隔符和间距，更好地适配不同语言
- 开发者文档（`docs/AGENT.md`）用于 LLM/AI 辅助开发

### 更改
- 默认"每次运行保存的最大底注数"从"全部"更改为 4
- 改进存档条目显示，采用特定语言的格式

### 修复
- 修复不同语言下 UI 元素之间的间距
- 修复分隔符字符在不同字体下的兼容性

## [1.2.0] - 2025-12-20

### 新增
- "撤销你的撤销"功能 - 回退的存档会保留在列表中，直到你进行新的操作
- 手柄支持：L3 后退一步，R3 打开存档列表
- 使用 LB/RB 按钮进行翻页
- 使用 Y 按钮跳转到当前存档

### 更改
- 改进存档列表 UI，根据回合数使用彩色分隔符
- 更好的状态标签（例如，"选择手牌（出牌）"vs"选择手牌（弃牌）"）

## [1.1.0] - 2025-12-15

### 新增
- Steamodded 菜单中的配置选项
- 切换不同游戏状态的存档点
- 可配置的存档保留（1、2、4、6、8、16 个底注或全部）
- 删除所有存档按钮

### 更改
- 存档现在存储在特定配置文件的文件夹中
- 改进元数据缓存，使用 `.meta` 文件

## [1.0.0] - 2025-12-10

### 新增
- 首次发布
- 在关键游戏时刻自动创建存档
- 按 `S` 后退一个存档
- 按 `Ctrl+S` 打开存档浏览器
- 带分页的存档列表 UI
- 当前存档高亮显示
